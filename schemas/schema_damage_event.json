{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/chev-damage-event.schema.json",
  "title": "Cultural Heritage Event Dataset (CHEV) - Event-Based Version",
  "description": "Dataset recording unique damage events to cultural heritage sites in countries experiencing armed conflict or unrest. The unit of observation is a damage event. Multiple newspaper articles reporting the same damage event are merged, with metadata on all source articles preserved.",
  "type": "object",
  "properties": {
    "event_id": {
      "type": "string",
      "description": "Unique ID for each damage event in the dataset",
      "pattern": "^[A-Z]+_[0-9]+$"
    },
    "event_date_start": {
      "type": ["string", "null"],
      "description": "Start date of the damage event. If no start date can be identified, the start date of the conflict",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "event_date_end": {
      "type": ["string", "null"],
      "description": "End date of the damage event. If no end date can be identified, defaults to the earliest article publication date reporting this event",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "year": {
      "type": "integer",
      "description": "Calendar year the damage event occurred",
      "minimum": 1900,
      "maximum": 2100
    },
    "temp_prec": {
      "type": "integer",
      "description": "Precision code for damage event date. 0 = not applicable (summary event); 1 = exact day known; 2 = time period 2-6 days; 3 = week only; 4 = month only; 5 = year only",
      "enum": [0, 1, 2, 3, 4, 5]
    },
    "event_latitude": {
      "type": ["number", "null"],
      "description": "Latitude coordinate of the damaged site in decimal format",
      "minimum": -90,
      "maximum": 90
    },
    "event_longitude": {
      "type": ["number", "null"],
      "description": "Longitude coordinate of the damaged site in decimal format",
      "minimum": -180,
      "maximum": 180
    },
    "geo_prec": {
      "type": "integer",
      "description": "Precision code for damage event location. 1 = exact site; 2 = village/city; 3 = second order admin division (ADM2); 4 = first order admin division (ADM1); 5 = section of country; 6 = whole country; 7 = coordinates at sea/water",
      "enum": [1, 2, 3, 4, 5, 6, 7]
    },
    "site_name": {
      "type": "string",
      "description": "Name of the cultural heritage site that was damaged"
    },
    "site_type": {
      "type": "integer",
      "description": "The type of the site that was damaged. 1 = place of worship; 2 = library; 3 = museum; 4 = archive; 5 = monument; 6 = statue; 7 = sculpture; 8 = place of burial; 9 = archeological site; 10 = garden; 11 = opera/theatre; 12 = house of culture; 13 = gallery; 14 = zoo; 15 = monastery/seminary/convent; 16 = memorial; 17 = art/music school; 18 = other",
      "enum": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]
    },
    "place_of_worship": {
      "type": ["integer", "null"],
      "description": "If site_type is 1 (place of worship), specify the type. 1 = mosque; 2 = church; 3 = synagogue; 4 = cathedral; 5 = temple; 6 = chapel",
      "enum": [1, 2, 3, 4, 5, 6, null]
    },
    "place_of_burial": {
      "type": ["integer", "null"],
      "description": "If site_type is 8 (place of burial), specify the type. 1 = shrine; 2 = mausoleum; 3 = tomb; 4 = grave",
      "enum": [1, 2, 3, 4, null]
    },
    "other_site_type": {
      "type": ["string", "null"],
      "description": "If site_type is 18 (other), describe the type of site"
    },
    "initiator": {
      "type": ["string", "null"],
      "description": "The perpetrating party of the damage event (e.g., U.S. military, Iraqi army, ISIS, Russian forces, Ukrainian forces)"
    },
    "group_at_site": {
      "type": ["string", "null"],
      "description": "The group present at the site when the event took place. Can be an armed or civilian group (e.g., worshippers, protestors, congregation, tourists, locals, civilians)"
    },
    "damage_type": {
      "type": ["string", "null"],
      "description": "Damage type. 1 = fire; 2 = explosion (bomb, explosive detonation); 3 = shelling (artillery fire, bullet); 4 = airstrike; 5 = rocket fire; 6 = looting/stealing; 7 = deface/desecrate/vandalize; 8 = occupied/barricaded; 9 = other. Multiple types separated by pipe (|) if multiple damage types occurred in this event",
      "pattern": "^[1-9](\\|[1-9])*$|^[1-9]$"
    },
    "other_damage_type": {
      "type": ["string", "null"],
      "description": "If damage_type is 9 (other), describe the type of damage"
    },
    "site_dmg_smry": {
      "type": ["string", "null"],
      "description": "Summary description of site damage (e.g., 'set ablaze', 'bombed', 'damaged', 'pillaged')"
    },
    "site_dmg_full": {
      "type": ["string", "null"],
      "description": "Comprehensive description of site damage, synthesized from all reporting articles"
    },
    "country": {
      "type": "string",
      "description": "Name of the country in which the site is located"
    },
    "num_articles": {
      "type": "integer",
      "description": "Number of newspaper articles that reported this damage event",
      "minimum": 1
    },
    "articles": {
      "type": "array",
      "description": "Array of all newspaper articles that reported this damage event",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "article_id": {
            "type": "string",
            "description": "Unique ID for each newspaper article",
            "pattern": "^[A-Z]+_[0-9]+$"
          },
          "article_date": {
            "type": "string",
            "description": "Publication date of the newspaper article",
            "format": "date",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
          },
          "article_source": {
            "type": "string",
            "description": "Name of the news source/publication (e.g., The Guardian, Reuters, New York Times)"
          },
          "article_headline": {
            "type": "string",
            "description": "Headline of the newspaper article"
          },
          "article_excerpt": {
            "type": ["string", "null"],
            "description": "Relevant excerpt from this article that describes the damage event"
          },
          "article_type": {
            "type": ["string", "null"],
            "description": "Type of article (e.g., news report, feature, opinion, wire service)",
            "enum": ["news_report", "feature", "opinion", "editorial", "wire_service", "investigative", "other", null]
          },
          "verification_quality": {
            "type": ["integer", "null"],
            "description": "Assessment of this article's verification quality. 1 = minimal sourcing/verification; 2 = moderate sourcing; 3 = strong sourcing with multiple independent sources; 4 = investigative/in-depth verification",
            "enum": [1, 2, 3, 4, null]
          },
          "reported_source": {
            "type": ["string", "null"],
            "description": "The source cited in this article for the damage information (e.g., human rights activist, eyewitness, local official, military spokesperson)"
          },
          "site_dmg_full": {
            "type": ["string", "null"],
            "description": "Full description of site damage from this specific article"
          },
          "initiator": {
            "type": ["string", "null"],
            "description": "The perpetrating party as named in this article"
          },
          "group_at_site": {
            "type": ["string", "null"],
            "description": "The group present at the site as mentioned in this article"
          },
          "damage_type": {
            "type": ["string", "null"],
            "description": "Damage type as reported in this article. Multiple types separated by pipe (|)"
          },
          "event_date_start": {
            "type": ["string", "null"],
            "description": "Start date of the event as reported in this article",
            "format": "date"
          },
          "event_date_end": {
            "type": ["string", "null"],
            "description": "End date of the event as reported in this article",
            "format": "date"
          },
          "notes": {
            "type": ["string", "null"],
            "description": "Notes specific to this article's reporting of the event"
          }
        },
        "required": [
          "article_id",
          "article_date",
          "article_source",
          "article_headline"
        ],
        "additionalProperties": true
      }
    },
    "earliest_article_date": {
      "type": "string",
      "description": "Publication date of the earliest article reporting this damage event",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "latest_article_date": {
      "type": "string",
      "description": "Publication date of the most recent article reporting this damage event",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "primary_article_source": {
      "type": "string",
      "description": "The news source considered the primary/most reliable source for this event (typically the earliest or most detailed report)"
    },
    "article_sources_list": {
      "type": "array",
      "description": "List of all news sources that reported this event",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "uniqueItems": true
    },
    "verification_level": {
      "type": ["integer", "null"],
      "description": "Overall verification level for this damage event based on number and quality of reporting articles. 1 = single article, minimal verification; 2 = multiple articles or single high-quality article; 3 = multiple independent sources; 4 = extensively verified with investigative reporting",
      "enum": [1, 2, 3, 4, null]
    },
    "conflicting_reports": {
      "type": "boolean",
      "description": "Indicates whether there are conflicting details across articles reporting this event (e.g., different dates, initiators, or damage descriptions)",
      "default": false
    },
    "conflict_notes": {
      "type": ["string", "null"],
      "description": "Description of any conflicting information across articles, if conflicting_reports is true"
    },
    "event_notes": {
      "type": ["string", "null"],
      "description": "General notes about this damage event, including merging decisions or data quality issues"
    },
    "coding_date": {
      "type": ["string", "null"],
      "description": "Date when this event record was created/last updated",
      "format": "date",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    }
  },
  "required": [
    "event_id",
    "site_name",
    "site_type",
    "country",
    "temp_prec",
    "geo_prec",
    "num_articles",
    "articles",
    "earliest_article_date",
    "latest_article_date",
    "primary_article_source",
    "article_sources_list"
  ],
  "allOf": [
    {
      "if": {
        "properties": {
          "site_type": {
            "const": 1
          }
        }
      },
      "then": {
        "required": ["place_of_worship"]
      }
    },
    {
      "if": {
        "properties": {
          "site_type": {
            "const": 8
          }
        }
      },
      "then": {
        "required": ["place_of_burial"]
      }
    },
    {
      "if": {
        "properties": {
          "site_type": {
            "const": 18
          }
        }
      },
      "then": {
        "required": ["other_site_type"]
      }
    },
    {
      "if": {
        "properties": {
          "damage_type": {
            "const": "9"
          }
        }
      },
      "then": {
        "required": ["other_damage_type"]
      }
    },
    {
      "if": {
        "properties": {
          "conflicting_reports": {
            "const": true
          }
        }
      },
      "then": {
        "required": ["conflict_notes"]
      }
    }
  ],
  "additionalProperties": true,
  "$defs": {
    "site_types": {
      "description": "Human-readable labels for site type codes",
      "enum": [
        "place_of_worship",
        "library",
        "museum",
        "archive",
        "monument",
        "statue",
        "sculpture",
        "place_of_burial",
        "archeological_site",
        "garden",
        "opera_theatre",
        "house_of_culture",
        "gallery",
        "zoo",
        "monastery_seminary_convent",
        "memorial",
        "art_music_school",
        "other"
      ]
    },
    "damage_types": {
      "description": "Human-readable labels for damage type codes",
      "enum": [
        "fire",
        "explosion",
        "shelling",
        "airstrike",
        "rocket_fire",
        "looting_stealing",
        "deface_desecrate_vandalize",
        "occupied_barricaded",
        "other"
      ]
    },
    "temporal_precision": {
      "description": "Human-readable labels for temporal precision codes",
      "enum": [
        "not_applicable",
        "exact_day",
        "2_to_6_days",
        "week",
        "month",
        "year"
      ]
    },
    "geographic_precision": {
      "description": "Human-readable labels for geographic precision codes",
      "enum": [
        "exact_site",
        "village_city",
        "adm2_district",
        "adm1_province",
        "country_section",
        "whole_country",
        "at_sea_water"
      ]
    }
  }
}